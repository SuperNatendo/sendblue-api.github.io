(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{125:function(e,s,n){"use strict";n.r(s),n.d(s,"frontMatter",(function(){return o})),n.d(s,"metadata",(function(){return i})),n.d(s,"rightToc",(function(){return d})),n.d(s,"default",(function(){return b}));var t=n(2),a=n(6),r=(n(0),n(133)),o={id:"sendingMessages",title:"Sending Messages",sidebar_label:"Sending Messages"},i={id:"sendingMessages",title:"Sending Messages",description:"Thank you for trying out sendblue. Below you will find some very basic API Docs on how you can use Sendblue to send and receive iMessages.",source:"@site/docs/doc2.md",permalink:"/docs/sendingMessages",editUrl:"https://github.com/sendblue-api/docs/doc2.md",sidebar_label:"Sending Messages",sidebar:"someSidebar",next:{title:"Receiving Messages",permalink:"/docs/receivingMessages"}},d=[{value:"Sending iMessages",id:"sending-imessages",children:[]},{value:"Send Message Response",id:"send-message-response",children:[{value:"Status",id:"status",children:[]},{value:"Error Codes",id:"error-codes",children:[]},{value:"From Number",id:"from-number",children:[]},{value:"Handle",id:"handle",children:[]}]}],c={rightToc:d};function b(e){var s=e.components,n=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(t.a)({},c,n,{components:s,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Thank you for trying out sendblue. Below you will find some very basic API Docs on how you can use Sendblue to send and receive iMessages."),Object(r.b)("h2",{id:"sending-imessages"},"Sending iMessages"),Object(r.b)("p",null,"In order to send messages with sendblue, simply send a POST request with your api key and secret as headers, and a json body which contains the destination number and the content of your message."),Object(r.b)("p",null,"Here's what it looks like in Node.js:"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),'request.post({\n    url: "https://bluetexts-272923.uc.r.appspot.com/api/send-message",\n    headers: {\n        "sb-api-key-id": <<apiKey>>,\n        "sb-api-secret-key": <<apiSecret>>\n    },\n    json: {\n        number: number,\n        content: content,\n    }\n}, (err, httpResponse, body) => {\n    if (err) {\n        console.error(err);\n    } else {\n        console.log("Success!");\n    }\n});\n')),Object(r.b)("h2",{id:"send-message-response"},"Send Message Response"),Object(r.b)("p",null,"Here is a sample send-message response:"),Object(r.b)("pre",null,Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-json"}),'{\n    "status": "SENT",\n    "error_code": "",\n    "from_number": "+13322175641",\n    "messsage_handle": "1bfed3fa-2431-4ef2-b000-571a3c5dbf7b"\n}\n')),Object(r.b)("h3",{id:"status"},"Status"),Object(r.b)("p",null,"The status field will report the status. There are currently 7 different possible responses to a send-message request:"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"SENT")," - The message has been sent"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"DELIVERED")," - The message has been sent, and we've received confirmation of delivery from the end users phone."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"READ")," - The message has been sent, and we've received confirmation that the end user has read the message."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"ERROR")," - The message has failed to send, see the error_code field to understaind why"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"DOWNGRADED")," - The end user does not have iMessage enabled, therefore we had to downgrade the message and send it as an SMS"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"TIMEOUT")," - Our servers have failed to provide an accurate status for the message in the alotted time (8s). Use the '/status' endpoint to check the true message status"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"PENDING")," - You have requested to send this message when either you have reached your rate limit, or we are experiencing high traffic on the server, and we will send your message as soon as possible. You can request the status of the message using the '/status' endpoint."),Object(r.b)("h3",{id:"error-codes"},"Error Codes"),Object(r.b)("p",null,"TODO :3"),Object(r.b)("p",null,"for now anything besides 0 means the message has failed. In the future we will be able to tell you if this has to do with a server error, malformed phone number, phone number DNE, etc."),Object(r.b)("h3",{id:"from-number"},"From Number"),Object(r.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(t.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(t.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(r.b)("path",Object(t.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(r.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"Sendblue guaruntees message deliverability, and each client will only ever interact with your business from one phone number. However, different clients may see different numbers for texts sent from your company."))),Object(r.b)("p",null,"The from_number field is given as a convenience to you, in case you want to keep track of that info, or tell the client that they should expect a text from the number that you show them."),Object(r.b)("h3",{id:"handle"},"Handle"),Object(r.b)("p",null,"The message handle is used so that you can query the status of each message at a later date. This is especially useful in high volume message_status=PENDING cases or TIMEOUT cases."))}b.isMDXComponent=!0}}]);