(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{120:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return i})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return b}));var s=t(2),a=t(6),r=(t(0),t(130)),o={id:"sending",title:"Sending Messages",sidebar_label:"Sending Messages"},i={id:"sending",title:"Sending Messages",description:"Thank you for trying out sendblue. Below you will find some very basic API Docs on how you can use Sendblue to send and receive iMessages.",source:"@site/docs/sending.md",permalink:"/docs/sending",editUrl:"https://github.com/sendblue-api/sendblue-api.github.io/blob/gh-pages/docs/docs/sending.md",sidebar_label:"Sending Messages",sidebar:"someSidebar",previous:{title:"Setting up Webhooks",permalink:"/docs/webhooks"},next:{title:"Receiving Messages",permalink:"/docs/receiving"}},c=[{value:"Sending iMessages",id:"sending-imessages",children:[]},{value:"Send Message Response",id:"send-message-response",children:[{value:"Status",id:"status",children:[]},{value:"Error Codes",id:"error-codes",children:[]},{value:"From Number",id:"from-number",children:[]},{value:"Handle",id:"handle",children:[]}]}],l={rightToc:c};function b(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(s.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Thank you for trying out sendblue. Below you will find some very basic API Docs on how you can use Sendblue to send and receive iMessages."),Object(r.b)("h2",{id:"sending-imessages"},"Sending iMessages"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"POST https://api.sendblue.co/api/send-message")),Object(r.b)("p",null,"In order to send messages with sendblue, simply send a POST request with your api key and secret as headers, and a json body which contains the destination number and the content of your message."),Object(r.b)("p",null,"Here's what it looks like in Node.js:"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-js"}),'var url = `https://api.sendblue.co/api/send-message`;\n\nrequest.post({\n    url: url,\n    headers: {\n        "sb-api-key-id": <<apiKey>>,\n        "sb-api-secret-key": <<apiSecret>>\n    },\n    json: {\n        number: number,\n        content: content,\n    }\n}, (err, httpResponse, body) => {\n    if (err) {\n        console.error(err);\n    } else {\n        console.log("Success!");\n    }\n});\n')),Object(r.b)("h2",{id:"send-message-response"},"Send Message Response"),Object(r.b)("p",null,"Here is a sample send-message response:"),Object(r.b)("pre",null,Object(r.b)("code",Object(s.a)({parentName:"pre"},{className:"language-json"}),'{\n    "status": "SENT",\n    "error_code": "",\n    "from_number": "+13322175641",\n    "message_handle": "1bfed3fa-2431-4ef2-b000-571a3c5dbf7b"\n}\n')),Object(r.b)("h3",{id:"status"},"Status"),Object(r.b)("p",null,"The status field will report the status. There are currently 7 different possible responses to a send-message request:"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"SENT")," - The message has been sent"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"DELIVERED")," - The message has been sent, and we've received confirmation of delivery from the end users phone."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"READ")," - The message has been sent, and we've received confirmation that the end user has read the message."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"ERROR")," - The message has failed to send, see the error_code field to understaind why"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"DOWNGRADED")," - The end user does not have iMessage enabled, therefore we had to downgrade the message and send it as an SMS"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"PENDING")," - The message has reached our servers, but we have not been able to resolve the message status. This message may send at some point in the future. You can check on pending messages by querying the ",Object(r.b)("a",Object(s.a)({parentName:"p"},{href:"/docs/status"}),"/api/status")," endpoint"),Object(r.b)("h3",{id:"error-codes"},"Error Codes"),Object(r.b)("p",null,"TODO :3"),Object(r.b)("p",null,"for now anything besides 0 means the message has failed. In the future we will be able to tell you if this has to do with a server error, malformed phone number, phone number DNE, etc."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"beta"),"\n10001 - message failed to send\n10002 - failed to resolve message status"),Object(r.b)("h3",{id:"from-number"},"From Number"),Object(r.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(r.b)("div",Object(s.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(s.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(s.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(r.b)("path",Object(s.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(r.b)("div",Object(s.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"Sendblue focuses on message deliverability and end-user experience. This means that each of your users will only ever interact with your business through one Sendblue hone number. However, different clients may see different numbers for texts sent from your company."))),Object(r.b)("p",null,"The from_number field is given as a convenience to you, in case you want to keep track of that info, or tell the client that they should expect a text from the number that you show them."),Object(r.b)("h3",{id:"handle"},"Handle"),Object(r.b)("p",null,"The message handle is used so that you can query the status of each message at a later date. This is especially useful in high volume message_status=PENDING cases or TIMEOUT cases."))}b.isMDXComponent=!0},130:function(e,n,t){"use strict";t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return m}));var s=t(0),a=t.n(s);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,s,a=function(e,n){if(null==e)return{};var t,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)t=r[s],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)t=r[s],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=a.a.createContext({}),b=function(e){var n=a.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=b(e.components);return a.a.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},p=a.a.forwardRef((function(e,n){var t=e.components,s=e.mdxType,r=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=b(t),p=s,m=d["".concat(o,".").concat(p)]||d[p]||u[p]||r;return t?a.a.createElement(m,i(i({ref:n},l),{},{components:t})):a.a.createElement(m,i({ref:n},l))}));function m(e,n){var t=arguments,s=n&&n.mdxType;if("string"==typeof e||s){var r=t.length,o=new Array(r);o[0]=p;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:s,o[1]=i;for(var l=2;l<r;l++)o[l]=t[l];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}p.displayName="MDXCreateElement"}}]);